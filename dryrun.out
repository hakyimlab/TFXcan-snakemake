The flag 'directory' used in rule calculate_enpact_scores is only valid for outputs, not inputs.
Building DAG of jobs...
Job stats:
job                              count    min threads    max threads
-----------------------------  -------  -------------  -------------
aggregate_predictions                1              1              1
all                                  1              1              1
calculate_enpact_scores              1              1              1
create_enpact_scores_database        1              1              1
format_covariances                   1              1              1
generate_lEnpact_models              1              1              1
predict_with_enformer                1              1              1
prepare_files_for_predictDB          1              1              1
summary_TFXcan                       1              1              1
total                                9              1              1


[Fri Jun  7 17:05:24 2024]
Job 5: working on pc_risk
Reason: Missing output files: data/PCRISK_GWAS_2024-06-07/enformer_parameters/aggregation_config_PCRISK_GWAS_pc_risk.json


        python3 /beagle3/haky/users/shared_pipelines/enformer_pipeline_aggregate/scripts/enformer_predict.py --parameters data/PCRISK_GWAS_2024-06-07/enformer_parameters/enformer_parameters_PCRISK_GWAS_pc_risk.json
        

[Fri Jun  7 17:05:24 2024]
Job 6: working on phenotype=pc_risk
Reason: Missing output files: data/PCRISK_GWAS_2024-06-07/aggregated_predictions/pc_risk; Input files updated by another job: data/PCRISK_GWAS_2024-06-07/enformer_parameters/aggregation_config_PCRISK_GWAS_pc_risk.json

[Fri Jun  7 17:05:24 2024]
Job 7: working on pc_risk
Reason: Missing output files: /scratch/midway3/temi/enpact_predictions/pc_risk; Input files updated by another job: data/PCRISK_GWAS_2024-06-07/aggregated_predictions/pc_risk


        module load parallel;
        mkdir -p /scratch/midway3/temi/enpact_predictions/pc_risk;
        printf "%s\n"  | parallel -j 10 '/beagle3/haky/users/shared_software/TFXcan-pipeline-tools/bin/Rscript workflow/src/calculate_enpact_scores.R --input_file data/PCRISK_GWAS_2024-06-07/aggregated_predictions/pc_risk/{}_aggByCollect_pc_risk.csv.gz --output_file /scratch/midway3/temi/enpact_predictions/pc_risk/{}.pc_risk.aggByCollect.2024-06-07.csv.gz --enpact_models_directory /project/haky/users/temi/data/enpact_models/models185 --enpact_models_metadata metadata/models.enpact.185.txt'
        

[Fri Jun  7 17:05:24 2024]
Job 8: working on pc_risk
Reason: Missing output files: data/PCRISK_GWAS_2024-06-07/enpactdb/pc_risk.enpact_scores.array.rds.gz, data/PCRISK_GWAS_2024-06-07/enpactdb/pc_risk.enpact_scores.txt.gz; Input files updated by another job: /scratch/midway3/temi/enpact_predictions/pc_risk


            /beagle3/haky/users/shared_software/TFXcan-pipeline-tools/bin/Rscript workflow/src/create_enpact_scores_database.R --input_files /scratch/midway3/temi/enpact_predictions/pc_risk/{}.pc_risk.aggByCollect.2024-06-07.csv.gz --output_file data/PCRISK_GWAS_2024-06-07/enpactdb/pc_risk.enpact_scores.txt.gz --output_db data/PCRISK_GWAS_2024-06-07/enpactdb/pc_risk.enpact_scores.array.rds.gz --individuals 
        

[Fri Jun  7 17:05:24 2024]
rule prepare_files_for_predictDB:
    input: data/PCRISK_GWAS_2024-06-07/enpactdb/pc_risk.enpact_scores.txt.gz
    output: data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.enpact_scores.txt, data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.tf_tissue_annot.txt
    jobid: 9
    reason: Missing output files: data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.tf_tissue_annot.txt, data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.enpact_scores.txt; Input files updated by another job: data/PCRISK_GWAS_2024-06-07/enpactdb/pc_risk.enpact_scores.txt.gz
    wildcards: phenotype=pc_risk
    resources: mem_mb=<TBD>, disk_mb=<TBD>, tmpdir=<TBD>, partition=caslake, time=02:00:00, account=pi-haky, nodes=1, gpu=0, mem_cpu=4, cpu_task=8

/beagle3/haky/users/shared_software/TFXcan-pipeline-tools/bin/Rscript workflow/src/prepare_files_for_predictDB.R --enpact_scores_file data/PCRISK_GWAS_2024-06-07/enpactdb/pc_risk.enpact_scores.txt.gz --formatted_escores_file data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.enpact_scores.txt --formatted_annot_file data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.tf_tissue_annot.txt --filtered_GWAS_file data/PCRISK_GWAS_2024-06-07/collection/pc_risk.filteredGWAS.txt.gz

[Fri Jun  7 17:05:24 2024]
rule generate_lEnpact_models:
    input: data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.enpact_scores.txt, data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.tf_tissue_annot.txt
    output: output/lEnpact/pc_risk/models/filtered_db/predict_db_pc_risk_filtered.db, output/lEnpact/pc_risk/models/database/predict_db_pc_risk.txt.gz
    jobid: 10
    reason: Missing output files: output/lEnpact/pc_risk/models/filtered_db/predict_db_pc_risk_filtered.db, output/lEnpact/pc_risk/models/database/predict_db_pc_risk.txt.gz; Input files updated by another job: data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.tf_tissue_annot.txt, data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.enpact_scores.txt
    wildcards: phenotype=pc_risk
    resources: mem_mb=<TBD>, disk_mb=<TBD>, tmpdir=<TBD>, partition=beagle3, time=36:00:00, account=pi-haky, nodes=1, gpu=0, mem_cpu=4, cpu_task=8

workflow/helpers/generate_lEnpact_models.EUR.midway3.sbatch pc_risk /project/haky/users/temi/projects/TFXcan-snakemake/output/lEnpact /project/haky/users/temi/projects/TFXcan-snakemake/data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.tf_tissue_annot.txt /project/haky/users/temi/projects/TFXcan-snakemake/data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.enpact_scores.txt

[Fri Jun  7 17:05:24 2024]
rule format_covariances:
    input: output/lEnpact/pc_risk/models/database/predict_db_pc_risk.txt.gz
    output: output/lEnpact/pc_risk/models/database/predict_db_pc_risk.txt, output/lEnpact/pc_risk/models/database/Covariances.varID.txt
    jobid: 11
    reason: Missing output files: output/lEnpact/pc_risk/models/database/Covariances.varID.txt; Input files updated by another job: output/lEnpact/pc_risk/models/database/predict_db_pc_risk.txt.gz
    wildcards: phenotype=pc_risk
    resources: mem_mb=<TBD>, disk_mb=<TBD>, tmpdir=<TBD>, partition=beagle3, time=36:00:00, account=pi-haky, nodes=1, gpu=0, mem_cpu=4, cpu_task=8


            gzip -d /project/haky/users/temi/projects/TFXcan-snakemake/output/lEnpact/pc_risk/models/database/predict_db_pc_risk.txt.gz;
            sed -e 's/:/_/g' /project/haky/users/temi/projects/TFXcan-snakemake/output/lEnpact/pc_risk/models/database/predict_db_pc_risk.txt > /project/haky/users/temi/projects/TFXcan-snakemake/output/lEnpact/pc_risk/models/database/Covariances.varID.txt
        

[Fri Jun  7 17:05:24 2024]
rule summary_TFXcan:
    input: output/lEnpact/pc_risk/models/filtered_db/predict_db_pc_risk_filtered.db
    output: output/summary/pc_risk/pc_risk.enpactScores.spredixcan.csv
    jobid: 12
    reason: Missing output files: output/summary/pc_risk/pc_risk.enpactScores.spredixcan.csv; Input files updated by another job: output/lEnpact/pc_risk/models/filtered_db/predict_db_pc_risk_filtered.db
    wildcards: phenotype=pc_risk
    resources: mem_mb=<TBD>, disk_mb=<TBD>, tmpdir=<TBD>, partition=beagle3, time=36:00:00, account=pi-haky, nodes=1, gpu=0, mem_cpu=4, cpu_task=8

workflow/src/summary_TFXcan.sbatch pc_risk /project/haky/users/temi/projects/TFXcan-snakemake/output/lEnpact/pc_risk/models/filtered_db/predict_db_pc_risk_filtered.db /project/haky/users/temi/projects/TFXcan-snakemake/output/summary/pc_risk/pc_risk.enpactScores.spredixcan.csv /project/haky/users/temi/projects/TFXcan-snakemake/data/PCRISK_GWAS_2024-06-07/processed_sumstats/pc_risk .*.sumstats.txt.gz /project/haky/users/temi/projects/TFXcan-snakemake/output/lEnpact/pc_risk/models/database/Covariances.varID.txt

[Fri Jun  7 17:05:24 2024]
localrule all:
    input: data/sumstats/pc_risk.liftover.logistic.assoc.tsv.gz, data/PCRISK_GWAS_2024-06-07/processed_sumstats/pc_risk, data/PCRISK_GWAS_2024-06-07/finemapping/pc_risk, data/PCRISK_GWAS_2024-06-07/collection/pc_risk.filteredGWAS.txt.gz, data/PCRISK_GWAS_2024-06-07/collection/pc_risk.EnformerLoci.txt, data/PCRISK_GWAS_2024-06-07/enformer_parameters/enformer_parameters_PCRISK_GWAS_pc_risk.json, data/PCRISK_GWAS_2024-06-07/enformer_parameters/aggregation_config_PCRISK_GWAS_pc_risk.json, data/PCRISK_GWAS_2024-06-07/aggregated_predictions/pc_risk, /scratch/midway3/temi/enpact_predictions/pc_risk, data/PCRISK_GWAS_2024-06-07/enpactdb/pc_risk.enpact_scores.array.rds.gz, data/PCRISK_GWAS_2024-06-07/enpactdb/pc_risk.enpact_scores.txt.gz, data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.enpact_scores.txt, data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.tf_tissue_annot.txt, output/lEnpact/pc_risk/models/filtered_db/predict_db_pc_risk_filtered.db, output/lEnpact/pc_risk/models/database/predict_db_pc_risk.txt.gz, output/lEnpact/pc_risk/models/database/Covariances.varID.txt, output/summary/pc_risk/pc_risk.enpactScores.spredixcan.csv
    jobid: 0
    reason: Input files updated by another job: data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.tf_tissue_annot.txt, data/PCRISK_GWAS_2024-06-07/predictdb/pc_risk.enpact_scores.txt, output/lEnpact/pc_risk/models/database/predict_db_pc_risk.txt.gz, output/lEnpact/pc_risk/models/filtered_db/predict_db_pc_risk_filtered.db, data/PCRISK_GWAS_2024-06-07/aggregated_predictions/pc_risk, data/PCRISK_GWAS_2024-06-07/enformer_parameters/aggregation_config_PCRISK_GWAS_pc_risk.json, output/summary/pc_risk/pc_risk.enpactScores.spredixcan.csv, /scratch/midway3/temi/enpact_predictions/pc_risk, data/PCRISK_GWAS_2024-06-07/enpactdb/pc_risk.enpact_scores.array.rds.gz, output/lEnpact/pc_risk/models/database/Covariances.varID.txt, data/PCRISK_GWAS_2024-06-07/enpactdb/pc_risk.enpact_scores.txt.gz
    resources: mem_mb=<TBD>, disk_mb=<TBD>, tmpdir=/scratch/midway3/temi, partition=beagle3, time=02:00:00, account=pi-haky, nodes=1, gpu=0, mem_cpu=4, cpu_task=8

Job stats:
job                              count    min threads    max threads
-----------------------------  -------  -------------  -------------
aggregate_predictions                1              1              1
all                                  1              1              1
calculate_enpact_scores              1              1              1
create_enpact_scores_database        1              1              1
format_covariances                   1              1              1
generate_lEnpact_models              1              1              1
predict_with_enformer                1              1              1
prepare_files_for_predictDB          1              1              1
summary_TFXcan                       1              1              1
total                                9              1              1

Reasons:
    (check individual jobs above for details)
    input files updated by another job:
        aggregate_predictions, all, calculate_enpact_scores, create_enpact_scores_database, format_covariances, generate_lEnpact_models, prepare_files_for_predictDB, summary_TFXcan
    missing output files:
        aggregate_predictions, calculate_enpact_scores, create_enpact_scores_database, format_covariances, generate_lEnpact_models, predict_with_enformer, prepare_files_for_predictDB, summary_TFXcan

This was a dry-run (flag -n). The order of jobs does not reflect the order of execution.
