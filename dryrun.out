The flag 'directory' used in rule calculate_enpact_scores is only valid for outputs, not inputs.
Building DAG of jobs...
Job stats:
job                              count    min threads    max threads
-----------------------------  -------  -------------  -------------
all                                  1              1              1
create_enpact_scores_database        1              1              1
format_covariances                   1              1              1
generate_lEnpact_models              1              1              1
prepare_files_for_predictDB          1              1              1
summary_TFXcan                       1              1              1
total                                6              1              1


[Fri Jun  7 07:45:09 2024]
Job 6: working on prostate_cancer_risk
Reason: Missing output files: data/PCR_GWAS_2024-06-04/enpactdb/prostate_cancer_risk.enpact_scores.txt.gz, data/PCR_GWAS_2024-06-04/enpactdb/prostate_cancer_risk.enpact_scores.array.rds.gz; Updated input files: /scratch/midway3/temi/enpact_predictions/prostate_cancer_risk


            /beagle3/haky/users/shared_software/TFXcan-pipeline-tools/bin/Rscript workflow/src/create_enpact_scores_database.R --input_files /scratch/midway3/temi/enpact_predictions/prostate_cancer_risk/{}.prostate_cancer_risk.aggByCollect.2024-06-04.csv.gz --output_file data/PCR_GWAS_2024-06-04/enpactdb/prostate_cancer_risk.enpact_scores.txt.gz --output_db data/PCR_GWAS_2024-06-04/enpactdb/prostate_cancer_risk.enpact_scores.array.rds.gz --individuals NA12748,HG01684,HG00382,HG01705,NA20524,HG00151,HG00188,HG00110,NA20538,HG00323,HG01699,NA06984,HG00362,HG00178,HG01507,HG00381,HG00273,HG01697,NA20507,HG00266,HG01702,HG01617,HG00376,HG01536,HG00138,NA20502,HG00308,HG01501,NA20585,HG01624,NA12749,HG00242,NA20756,NA12751,HG00107,NA12717,NA20826,HG00261,HG00231,NA20506,HG00131,HG02224,NA12762,HG01615,NA20541,HG01786,HG01334,HG02233,NA07347,HG00237,HG00372,NA20534,HG01537,NA20790,NA12750,NA12155,HG01757,NA20753,NA20522,NA12763,HG00325,NA12144,NA11933,NA20804,HG00258,HG01530,HG01618,NA20763,HG00379,HG01525,HG00268,NA12286,NA11830,NA12813,NA20799,HG00097,HG01790,HG00312,NA12718,NA20531,NA06986,NA06985,HG00274,HG00189,NA20587,HG00156,HG02215,HG00128,HG00315,HG01605,NA20760,NA12044,NA11832,HG00337,NA20516,NA12348,HG00275,HG00100,HG01789,HG01762,NA20519,HG00101,HG00238,HG00240,NA20517,NA20769,HG00306,NA11992,NA20535,HG00327,NA20831,HG02239,HG00346,NA20540,NA20754,HG02223,NA12761,NA12400,HG01708,NA12778,HG00318,NA20528,HG00154,NA12874,NA12878,HG00269,HG01682,NA10851,HG01686,HG00280,HG02220,HG01767,HG01521,NA12383,HG00353,HG00119,HG00342,HG01620,HG00146,HG01503,HG00123,HG00332,HG01707,NA12234,HG00157,HG01672,HG00345,HG01776,HG00329,HG00309,HG02231,NA11994,HG00140,NA20801,NA20770,NA12828,HG00364,NA12889,HG00319,HG00174,NA20809,NA12154,NA11829,HG00366,NA12005,NA20811,HG00339,NA12872,HG00132,NA20814,NA11892,NA20813,NA20589,HG00330,HG01678,NA12777,NA11881,HG00290,HG00182,HG00171,HG00251,HG01504,HG01771,HG00378,HG01610,HG00236,HG01669,HG01606,NA20543,HG01668,HG01632,HG00284,NA12843,NA20774,NA20511,HG00148,NA12716,HG00380,HG01746,HG04302,HG00282,HG01680,HG04301,HG00136,HG00357,HG00311,HG02235,NA12043,NA11893,HG01607,HG00263,HG01626,HG00121,HG00303,HG00104,NA11894,HG01700,NA20514,HG01628,NA20785,NA11840,HG00367,NA12003,HG01516,NA12776,NA20787,HG00129,HG00343,HG00250,HG00356,HG01675,HG01676,HG00249,NA11919,HG02219,HG00334,NA20768,NA20533,HG00255,NA12341,NA12045,NA20521,HG00349,HG00259,HG01775,HG01710,NA07000,HG00108,HG00328,NA12842,NA12546,HG00272,HG01779,NA20828,HG01527,HG00134,HG00264,NA12830,HG00281,NA20757,HG00155,NA20509,HG02232,NA07051,NA12775,HG01765,HG00102,HG00335,NA11843,NA20520,HG02236,HG01694,NA20504,HG00265,NA20806,NA20515,NA20532,NA12004,NA20503,HG00324,HG00120,HG01785,NA07056,HG01630,NA20582,NA20832,HG00099,NA20778,HG01602,NA20759,HG00373,HG01512,HG00245,HG00254,HG00331,NA20786,HG01791,HG01522,NA20762,NA20761,HG00111,NA20800,HG01613,HG02221,HG00276,HG01766,HG00126,HG00252,NA12829,NA20783,HG00321,HG01625,NA20527,NA20827,HG00173,HG00142,HG00233,NA12006,NA20764,HG01603,NA20772,NA20581,HG00185,HG00267,HG01531,HG00262,HG00096,NA20775,NA20803,HG00112,HG00115,NA20807,NA20795,HG00368,HG01623,NA12827,HG00313,HG01773,HG01631,NA20513,HG00109,HG01524,NA20767,NA12873,HG00253,HG00234,HG00244,HG00103,HG00143,HG01513,HG00351,HG00383,HG01509,NA12815,NA20773,HG00338,HG00141,HG01515,HG00106,NA12489,NA20525,NA20542,HG01518,NA11930,HG01500,HG01510,HG00320,HG01784,HG00384,NA20796,HG00260,NA20821,HG01528,NA20819,HG04303,HG01747,HG00114,NA20766,NA20539,HG00125,NA20829,HG00350,HG00137,HG00278,HG01619,HG00159,NA11995,NA12046,HG01608,HG01777,HG00285,HG00359,NA11931,NA12340,HG00127,NA20529,HG01770,HG00256,HG00177,HG02238,HG01685,NA12399,HG00187,HG02230,HG00310,NA20544,HG00336,HG00117,HG00145,NA12414,HG01679,HG00326,NA20508,HG00344,NA12275,NA12287,HG00302,NA12273,HG00113,NA20810,NA20586,NA12249,NA20805,NA12890,HG00341,NA20812,HG00186,HG00257,HG00118,HG00176,NA20518,NA20798,HG00271,HG00375,NA20512,HG00358,HG00180,HG01709,NA06994,NA20797,HG01756,HG01761,NA12347,NA20808,NA20792,NA20536,NA07048,HG00152,NA12342,HG00116,NA20802,NA07357,HG00139,NA20755,HG00369,HG01673,NA12283,HG00304,HG01695,HG00105,NA20758,HG01781,HG00133,HG01612,HG00149,HG00243,NA20530,NA20815,NA07037,HG01670,NA20822,HG00277,HG00288,NA12058,HG00361,HG01768,NA20816,NA20510,NA11920,NA10847,HG00183,HG00365,NA20505,HG00130,HG01506,HG00355,HG01519,HG00239,NA12156,HG01704,NA20771,NA12272,NA20752,NA20537,NA11831,HG00135,HG00235,NA12760,HG00160,NA12814,HG00270,HG00158,HG00360,HG00181,NA20818,NA12812,NA06989,HG00190,NA11932,NA20588,NA20765,NA11918,HG00122,HG00179,HG00150,HG00377,HG00232,NA12282,HG00246,NA12413,HG00371
        

[Fri Jun  7 07:45:09 2024]
rule prepare_files_for_predictDB:
    input: data/PCR_GWAS_2024-06-04/enpactdb/prostate_cancer_risk.enpact_scores.txt.gz
    output: data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.enpact_scores.txt, data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.tf_tissue_annot.txt
    jobid: 7
    reason: Missing output files: data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.tf_tissue_annot.txt, data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.enpact_scores.txt; Input files updated by another job: data/PCR_GWAS_2024-06-04/enpactdb/prostate_cancer_risk.enpact_scores.txt.gz
    wildcards: phenotype=prostate_cancer_risk
    resources: mem_mb=<TBD>, disk_mb=<TBD>, tmpdir=<TBD>, partition=caslake, time=02:00:00, account=pi-haky, nodes=1, gpu=0, mem_cpu=4, cpu_task=8

/beagle3/haky/users/shared_software/TFXcan-pipeline-tools/bin/Rscript workflow/src/prepare_files_for_predictDB.R --enpact_scores_file data/PCR_GWAS_2024-06-04/enpactdb/prostate_cancer_risk.enpact_scores.txt.gz --formatted_escores_file data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.enpact_scores.txt --formatted_annot_file data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.tf_tissue_annot.txt --filtered_GWAS_file data/PCR_GWAS_2024-06-04/collection/prostate_cancer_risk.filteredGWAS.txt.gz

[Fri Jun  7 07:45:09 2024]
rule generate_lEnpact_models:
    input: data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.enpact_scores.txt, data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.tf_tissue_annot.txt
    output: output/lEnpact/prostate_cancer_risk/models/filtered_db/predict_db_prostate_cancer_risk_filtered.db, output/lEnpact/prostate_cancer_risk/models/database/predict_db_prostate_cancer_risk.txt.gz
    jobid: 8
    reason: Missing output files: output/lEnpact/prostate_cancer_risk/models/database/predict_db_prostate_cancer_risk.txt.gz; Input files updated by another job: data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.tf_tissue_annot.txt, data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.enpact_scores.txt
    wildcards: phenotype=prostate_cancer_risk
    resources: mem_mb=<TBD>, disk_mb=<TBD>, tmpdir=<TBD>, partition=beagle3, time=36:00:00, account=pi-haky, nodes=1, gpu=0, mem_cpu=4, cpu_task=8

workflow/helpers/generate_lEnpact_models.EUR.midway3.sbatch prostate_cancer_risk /project/haky/users/temi/projects/TFXcan-snakemake/output/lEnpact /project/haky/users/temi/projects/TFXcan-snakemake/data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.tf_tissue_annot.txt /project/haky/users/temi/projects/TFXcan-snakemake/data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.enpact_scores.txt

[Fri Jun  7 07:45:09 2024]
rule format_covariances:
    input: output/lEnpact/prostate_cancer_risk/models/database/predict_db_prostate_cancer_risk.txt.gz
    output: output/lEnpact/prostate_cancer_risk/models/database/predict_db_prostate_cancer_risk.txt, output/lEnpact/prostate_cancer_risk/models/database/Covariances.varID.txt
    jobid: 9
    reason: Input files updated by another job: output/lEnpact/prostate_cancer_risk/models/database/predict_db_prostate_cancer_risk.txt.gz
    wildcards: phenotype=prostate_cancer_risk
    resources: mem_mb=<TBD>, disk_mb=<TBD>, tmpdir=<TBD>, partition=beagle3, time=36:00:00, account=pi-haky, nodes=1, gpu=0, mem_cpu=4, cpu_task=8


            gzip -d /project/haky/users/temi/projects/TFXcan-snakemake/output/lEnpact/prostate_cancer_risk/models/database/predict_db_prostate_cancer_risk.txt.gz
            sed -e 's/:/_/g' /project/haky/users/temi/projects/TFXcan-snakemake/output/lEnpact/prostate_cancer_risk/models/database/predict_db_prostate_cancer_risk.txt > /project/haky/users/temi/projects/TFXcan-snakemake/output/lEnpact/prostate_cancer_risk/models/database/Covariances.varID.txt
        

[Fri Jun  7 07:45:09 2024]
rule summary_TFXcan:
    input: output/lEnpact/prostate_cancer_risk/models/filtered_db/predict_db_prostate_cancer_risk_filtered.db
    output: output/summary/prostate_cancer_risk/prostate_cancer_risk.enpactScores.spredixcan.csv
    jobid: 10
    reason: Input files updated by another job: output/lEnpact/prostate_cancer_risk/models/filtered_db/predict_db_prostate_cancer_risk_filtered.db
    wildcards: phenotype=prostate_cancer_risk
    resources: mem_mb=1000, mem_mib=954, disk_mb=1000, disk_mib=954, tmpdir=<TBD>, partition=beagle3, time=36:00:00, account=pi-haky, nodes=1, gpu=0, mem_cpu=4, cpu_task=8

workflow/src/summary_TFXcan.sbatch prostate_cancer_risk /project/haky/users/temi/projects/TFXcan-snakemake/output/lEnpact/prostate_cancer_risk/models/filtered_db/predict_db_prostate_cancer_risk_filtered.db /project/haky/users/temi/projects/TFXcan-snakemake/output/summary/prostate_cancer_risk/prostate_cancer_risk.enpactScores.spredixcan.csv /project/haky/users/temi/projects/TFXcan-snakemake/data/PCR_GWAS_2024-06-04/processed_sumstats/prostate_cancer_risk .*.sumstats.txt.gz /project/haky/users/temi/projects/TFXcan-snakemake/output/lEnpact/prostate_cancer_risk/models/database/Covariances.varID.txt

[Fri Jun  7 07:45:09 2024]
localrule all:
    input: data/sumstats/prostate_cancer_risk.liftover.logistic.assoc.tsv.gz, data/PCR_GWAS_2024-06-04/processed_sumstats/prostate_cancer_risk, data/PCR_GWAS_2024-06-04/finemapping/prostate_cancer_risk, data/PCR_GWAS_2024-06-04/collection/prostate_cancer_risk.filteredGWAS.txt.gz, data/PCR_GWAS_2024-06-04/collection/prostate_cancer_risk.EnformerLoci.txt, data/PCR_GWAS_2024-06-04/enformer_parameters/enformer_parameters_PCR_GWAS_prostate_cancer_risk.json, data/PCR_GWAS_2024-06-04/aggregated_predictions/prostate_cancer_risk, /scratch/midway3/temi/enpact_predictions/prostate_cancer_risk, data/PCR_GWAS_2024-06-04/enpactdb/prostate_cancer_risk.enpact_scores.array.rds.gz, data/PCR_GWAS_2024-06-04/enpactdb/prostate_cancer_risk.enpact_scores.txt.gz, data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.enpact_scores.txt, data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.tf_tissue_annot.txt, output/lEnpact/prostate_cancer_risk/models/filtered_db/predict_db_prostate_cancer_risk_filtered.db, output/lEnpact/prostate_cancer_risk/models/database/predict_db_prostate_cancer_risk.txt.gz, output/lEnpact/prostate_cancer_risk/models/database/Covariances.varID.txt, output/summary/prostate_cancer_risk/prostate_cancer_risk.enpactScores.spredixcan.csv
    jobid: 0
    reason: Input files updated by another job: data/PCR_GWAS_2024-06-04/enpactdb/prostate_cancer_risk.enpact_scores.array.rds.gz, data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.enpact_scores.txt, output/lEnpact/prostate_cancer_risk/models/database/Covariances.varID.txt, output/summary/prostate_cancer_risk/prostate_cancer_risk.enpactScores.spredixcan.csv, output/lEnpact/prostate_cancer_risk/models/database/predict_db_prostate_cancer_risk.txt.gz, data/PCR_GWAS_2024-06-04/enpactdb/prostate_cancer_risk.enpact_scores.txt.gz, output/lEnpact/prostate_cancer_risk/models/filtered_db/predict_db_prostate_cancer_risk_filtered.db, data/PCR_GWAS_2024-06-04/predictdb/prostate_cancer_risk.tf_tissue_annot.txt
    resources: mem_mb=<TBD>, disk_mb=<TBD>, tmpdir=/scratch/midway3/temi, partition=beagle3, time=02:00:00, account=pi-haky, nodes=1, gpu=0, mem_cpu=4, cpu_task=8

Job stats:
job                              count    min threads    max threads
-----------------------------  -------  -------------  -------------
all                                  1              1              1
create_enpact_scores_database        1              1              1
format_covariances                   1              1              1
generate_lEnpact_models              1              1              1
prepare_files_for_predictDB          1              1              1
summary_TFXcan                       1              1              1
total                                6              1              1

Reasons:
    (check individual jobs above for details)
    input files updated by another job:
        all, format_covariances, generate_lEnpact_models, prepare_files_for_predictDB, summary_TFXcan
    missing output files:
        create_enpact_scores_database, generate_lEnpact_models, prepare_files_for_predictDB
    updated input files:
        create_enpact_scores_database

This was a dry-run (flag -n). The order of jobs does not reflect the order of execution.
